{"version":3,"sources":["webpack:///./core/lib/search/adapter/api/elasticsearch/score.js","webpack:///./core/lib/search/adapter/api/elasticsearch/multimatch.js","webpack:///./core/lib/search/adapter/api/elasticsearch/boost.js","webpack:///./core/lib/search/adapter/api/elasticsearch/mapping.js","webpack:///./core/lib/search/adapter/api/elasticsearchQuery.js","webpack:///./core/lib/search/adapter/api/searchAdapter.ts","webpack:///./node_modules/lodash-es/_baseMap.js","webpack:///./node_modules/lodash-es/map.js"],"names":["getFunctionScores","config","elasticsearch","hasOwnProperty","filter","esScoringAttributes","searchScoring","attributes","Object","keys","length","attribute","scoreValues","scoreValue","data","weight","push","score_mode","boost_mode","max_boost","function_min_score","getMultiMatchConfig","queryText","scoringConfig","minimumShouldMatch","minimum_should_match","queryMethod","encodeURIComponent","multiMatchConfig","operator","fuzziness","cutoff_frequency","max_expansions","prefix_length","tie_breaker","analyzer","getConfig","getBoosts","searchableAttributes","getMapping","entityType","mapping","filterFieldMapping","prepareElasticsearchQueryBody","searchQuery","bodybuilder","getSearchText","rangeOperators","query","appliedFilters","cloneDeep","getAppliedFilters","hasCatalogFilters","forEach","scope","value","every","v","includes","Array","isArray","attrFilterBuilder","filterQr","attrPostfix","catalogfilter","valueKeys","indexOf","rangeAttribute","products","priceFilterKey","andFilter","newValue","filterMinimumShouldMatch","orFilter","b","allFilters","getAvailableFilters","attrToFilter","field","aggregationSize","size","filterAggregationSize","aggregation","priceFilters","getQueryBody","searchableFields","orQuery","split","boost","functionScore","queryBody","build","suggest","this","entities","initBaseTypes","search","Request","type","Error","ElasticsearchQueryBody","min_score","groupId","groupToken","store","storeView","index","url","host","httpQuery","from","sort","_sourceExclude","_source_exclude","join","_sourceInclude","_source_include","q","request","JSON","stringify","method","mode","headers","body","then","resp","json","catch","error","toString","handleResult","start","items","map","hits","hit","assign","_source","_score","slug","useMagentoUrlKeys","url_key","name","id","total","perPage","aggregations","suggestions","isErrorObject","code","registerEntityType","queryProcessor","resultProcessor","collection","iteratee","result","isArrayLike","key"],"mappings":"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","file":"vsf-search-adapter-0.525bf9edcdaa23637ac2.js","sourceRoot":""}